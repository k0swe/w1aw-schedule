<mat-card>
  <mat-card-header>
    <mat-card-title>User Approvals</mat-card-title>
    @if (eventInfo$ | async; as eventInfo) {
      <mat-card-subtitle>{{ eventInfo.name }}</mat-card-subtitle>
    }
  </mat-card-header>
  <mat-card-content>
    @if (eventId(); as evtId) {
      <mat-tab-group
        [selectedIndex]="selectedTabIndex()"
        (selectedIndexChange)="onTabChange($event)"
      >
        <mat-tab>
          <ng-template mat-tab-label>
            <span [matBadge]="(pendingCount$ | async) || 0" matBadgeOverlap="false">
              Pending
            </span>
          </ng-template>
          <kel-approval-list
            [userList]="provisionalUsers$"
            [eventId]="evtId"
            [displayColumns]="[
              'name',
              'callsign',
              'email',
              'phone',
              'arrlMemberNumber',
              'discordUsername',
              'approve',
              'decline',
            ]"
          >
          </kel-approval-list>
        </mat-tab>
        <mat-tab label="Approved">
          <kel-approval-list
            [userList]="approvedUsers$"
            [eventId]="evtId"
            [displayColumns]="[
              'name',
              'callsign',
              'email',
              'phone',
              'arrlMemberNumber',
              'discordUsername',
              'multi-shift',
              'decline',
            ]"
          >
          </kel-approval-list>
        </mat-tab>
        <mat-tab label="Declined">
          <kel-approval-list
            [userList]="declinedUsers$"
            [eventId]="evtId"
            [displayColumns]="[
              'name',
              'callsign',
              'email',
              'phone',
              'arrlMemberNumber',
              'discordUsername',
              'approve',
            ]"
          >
          </kel-approval-list>
        </mat-tab>
      </mat-tab-group>
    } @else {
      <p>Loading event information...</p>
    }
  </mat-card-content>
</mat-card>

<div class="cell-container">
  <button
    mat-flat-button
    [class.reserved-by-user]="isReservedByUser()"
    [class.reserved-by-other]="isReservedByOther()"
    [disabled]="buttonDisabled()"
    (click)="toggleShift()"
  >
    @if ((shift$ | async)?.reservedDetails?.callsign; as callsign) {
      <span class="callsign">{{ callsign }}</span>
    } @else {
      <span>open</span>
    }
  </button>
  @if (isAdmin$ | async) {
    <span>
      <button mat-icon-button [matMenuTriggerFor]="adminMenu">
        <mat-icon>expand_more</mat-icon>
      </button>
      <mat-menu #adminMenu="matMenu">
        @if ((shift$ | async)?.reservedBy) {
          <button mat-menu-item (click)="clearReservation()">
            <span>Clear Reservation</span>
          </button>
        }
        @for (u of approvedUsers$ | async; track u.id) {
          <button mat-menu-item (click)="reserveFor(u.id!)">
            <span class="callsign">{{ u.callsign }}</span>
          </button>
        }
      </mat-menu>
    </span>
  }
</div>
